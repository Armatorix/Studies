% form.pl
% Przemyslaw Kobylanski <przemko@mac.com>

:- module(form, [build_form/2]).

% build_form(+ListOfOptions, +ListOfElements)
%
build_form(Options, Elements) :-
	open_form(Options),
	build_elements(Elements),
	close_form.

open_form(Options) :-
	format('<form'),
	check_action(Options),
	check_method(Options),
	format('>~n').

close_form :-
	format('</form>~n').

check_action(Options) :-
	(   member(action(Url), Options)
	->  format(' action="~w"', [Url])
	;   true).

check_method(Options) :-
	(   member(method(get), Options)
	->  format(' method="get"')
	;   (   member(method(post), Options)
	    -> format(' method="post"')
	    ;	(   member(method(Method), Options)
		->  throw(unrecognized(method(Method)))
		;   true))).
build_row(N,Size) :-
	N1 is N-1 , 
	N2 is Size - N,
	empty_fields(N1,L1),
	empty_fields(N2,L2),
	build_elements(L1),
	build_element([picture(queen)]),
	build_elements(L2).
empty_fileds(0,[]) :-
	!.
empty_fields(N,[pictur(empty) | L]) :- 
	N2 is N-1, empty_fields(N2,L).

build_elements([]).
build_elements([Element | Rest]) :-
	build_element(Element),
	build_elements(Rest).

build_element(br) :-
	format('  <br>~n').
build_element(input(text, Name)) :-
	format('  <input type="text" name="~w">~n',
	       [Name]).
build_element(input(submit)) :-
	format('  <input type="submit" value="Submit">~n').
build_element(input(submit, Value)) :-
	format('  <input type="submit" value="~w">~n',
	       [Value]).
build_element(input(radio, Name, Value, Text)) :-
	format('  <input type="radio" name="~w" value="~w"> ~w~n',
	       [Name, Value, Text]).
build_element(input(radio(checked), Name, Value, Text)) :-
	format('  <input type="radio" name="~w" value="~w" checked="checked"> ~w~n',
	       [Name, Value, Text]).
build_element(h1(Text)) :-
	format('  <h1>~w</h1>~n',
		[Text]).
build_element(label(For, Text)) :-
	format('  <label for="~w">~w</label>~n',
	       [For, Text]).
build_element(picture(Name)) :-
	format('  <img src="pic/~w.png">',
		[Name]).
